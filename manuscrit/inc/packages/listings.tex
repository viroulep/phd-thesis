\usepackage{listingsutf8}
\usepackage{multicol}

\lstset{
	tabsize=4,
%	frame=single,
	breaklines=true,
	basicstyle=\fontfamily{DejaVuSansMono}\ttfamily\small,
	frame=tb,
	framerule=0.2pt,
%	frameround={tttt},
	showstringspaces=false,
	language=c,
%	linewidth=0.95\textwidth,
	%keywordstyle=\color{black}\bfseries,
	keywordstyle=\color{blue},
	commentstyle=\color{OliveGreen},
	stringstyle=\color{red}\itshape,
	extendedchars=true,
	inputencoding=utf8,
	numbers=left,
	numberstyle=\tiny,
	numbersep=5pt,
% OMP define
emph={\#,pragma, taskwait, omp, for, num_threads, __kmpc_omp_task_alloc, __kmpc_omp_task, schedule, parallel, task, target, map, depend, affinity,init}, emphstyle=\color{RoyalBlue}\bfseries,
emph={[2]in,inout,out,cw,data,node,thread, random, cyclic, cyclicnuma, tofrom, spawn, sync}, emphstyle={[2]\color{BrickRed}\bfseries},
emph={[3]tied,untied,shared,static}, emphstyle={[3]\color{Gray}\bfseries},
emph={[4]lu0,fwd,bdiv,bmod}, emphstyle={[4]\color{DarkGreen}\bfseries},
emph={[5]omp_get_num_nodes, omp_get_node_num, omp_get_node_from_data,omp_set_task_affinity}, emphstyle={[5]\color{DarkViolet}\bfseries},
emph={[6]kmp_task_t}, emphstyle={[6]\color{blue}\bfseries},
    %moredelim=**[is][\only<3>{\color{red}}]{@}{@},
literate=
{á}{{\'a}}1
{à}{{\`a}}1
{â}{{\^a}}1
{ã}{{\~a}}1
{é}{{\'e}}1
{ê}{{\^e}}1
{è}{{\`e}}1
{œ}{{\oe{}}}1
{í}{{\'i}}1
{ó}{{\'o}}1
{õ}{{\~o}}1
{ú}{{\'u}}1
{ü}{{\"u}}1
{ç}{{\c{c}}}1,
}

%\lstset{
%  language=c,
%  basicstyle=\footnotesize\ttfamily\upshape,
%  columns=fullflexible,
%  showstringspaces=false,
%  stringstyle=\color{darkgreen},
%  identifierstyle=\color{darkblue},
%  keywordstyle=\color{darkred},
%  keywordstyle=[2],
%  commentstyle=\color{gray}\upshape,
%    numbers=left,
%frame=leftline,
%tabsize=4,
%xleftmargin=2\stdindent
%emph={\#,pragma, taskwait, omp, task, depend}, emphstyle=\color{RoyalBlue}\bfseries,
%emph={[2]in,inout,out,cw}, emphstyle={[2]\color{BrickRed}\bfseries},
%emph={[3]tied,untied,shared}, emphstyle={[3]\color{Gray}\bfseries},
%emph={[4]lu0,fwd,bdiv,bmod}, emphstyle={[4]\color{DarkGreen}\bfseries},
%emph={[5]cw}, emphstyle={[5]\color{DarkViolet}\bfseries},
%}
%\lstdefinestyle{smaller}{basicstyle=\scriptsize\ttfamily}


\newcommand\YAMLcolonstyle{\color{red}\mdseries}
\newcommand\YAMLkeystyle{\color{black}\bfseries}
\newcommand\YAMLvaluestyle{\color{blue}\mdseries}

\makeatletter

% here is a macro expanding to the name of the language
% (handy if you decide to change it further down the road)
\newcommand\language@yaml{yaml}

\expandafter\expandafter\expandafter\lstdefinelanguage
\expandafter{\language@yaml}
{
  keywords={true,false,null,y,n},
  keywordstyle=\color{darkgray}\bfseries,
  basicstyle=\YAMLkeystyle\small,                                 % assuming a key comes first
  sensitive=false,
  comment=[l]{\#},
  morecomment=[s]{/*}{*/},
  commentstyle=\color{purple}\ttfamily,
  stringstyle=\YAMLvaluestyle\ttfamily,
  moredelim=[l][\color{orange}]{\&},
  moredelim=[l][\color{magenta}]{*},
  moredelim=**[il][\YAMLcolonstyle{:}\YAMLvaluestyle]{:},   % switch to value style at :
  morestring=[b]',
  morestring=[b]",
  literate =    {---}{{\ProcessThreeDashes}}3
                {>}{{\textcolor{red}\textgreater}}1     
                {|}{{\textcolor{red}\textbar}}1 
                {\ -\ }{{\mdseries\ -\ }}3
  {á}{{\'a}}1
  {à}{{\`a}}1
  {â}{{\^a}}1
  {ã}{{\~a}}1
  {é}{{\'e}}1
  {ê}{{\^e}}1
  {è}{{\`e}}1
  {œ}{{\oe{}}}1
  {í}{{\'i}}1
  {ó}{{\'o}}1
  {õ}{{\~o}}1
  {ú}{{\'u}}1
  {ü}{{\"u}}1
  {ç}{{\c{c}}}1,
}

% switch to key style at EOL
\lst@AddToHook{EveryLine}{\ifx\lst@language\language@yaml\YAMLkeystyle\fi}
\makeatother

\newcommand\ProcessThreeDashes{\llap{\color{cyan}\mdseries-{-}-}}
