\input{tex/preambule}
\input{tex/introduction}

\input{tex/context}

% This chapter should include
%\begin{itemize}
  %\item HPC ? (OpenMP (with ref to the "main" chapter for details), other existing languages)
\cite{openmp40}, OpenMP 4.0

\cite{openmp45}, OpenMP 4.5

\cite{Marowka2004}, OpenMP-oriented applications for distributed shared memory architectures
  %\item NUMA (with ref to the "main" chapter)
  %\item task + Workstealing (with ref to the "main" chapter)

\cite{cilk5}, CILK

\cite{Tchiboukdjian2010}, A Work Stealing Scheduler for Parallel Loops on Shared Cache Multicores

\input{tex/rw}
  %\item Related work


%\end{itemize}

\part{Getting to know NUMA better, and improving its use through OpenMP}

\begin{savequote}[6cm]
<< truc
\qauthor{Test}
\end{savequote}

\chapter{Executing applications on NUMA architectures, TODO improve title}\label{chap:contrib:characterization}
\chaptertoc

\section{Hardware}

\subsection{idchire}
\subsection{idkat}
\subsection{brunch}

\section{Kastors}
\subsection{Motivation}
\subsection{Kernels description}
\subsection{Preliminary results}

\section{Focus on "profiling" Cholesky}
\subsection{Importance of initialization}
\subsection{Impact of BLAS library}
matter for top perf, not for overall behavior
\subsection{Conclusion: all is DGEMM}

\section{Better understanding of basic kernels through "the tool"}
\subsection{Motivation}
\subsection{Basic design}
\subsection{Various scenario}

\section{Modeling Cholesky (Theory)}
\subsection{Model description}
\subsection{Lower/Upper bound given kernels' profiling}

\section{Conclusion}

%\input{tex/characterization}
% This chapter should include:
% - NUMA architectures descriptions
\cite{Virouleau2016b}, Using data dependencies to improve task-based scheduling strategies on numa architectures

\cite{Broquedis2010}, hwloc: {A} Generic Framework for Managing Hardware Affinities in {HPC} Applications

% - Various examples (idchire, idkat, idbool?, brunch, random 16 cores 2 nodes
% - Key points (bandwidth, latency, cache coherence protocol, ...)

\cite{Dice2013}, Scalable statistics counters

\cite{Libutti2014}, Exploiting performance counters for energy efficient co-scheduling of mixed workloads on multi-core platforms

\cite{Li2013}, Characterization of Input/Output bandwidth performance models in NUMA architecture for data intensive applications

\cite{Bienia2011}, Benchmarking Modern Multiprocessors

\cite{Olivier2013}, Characterizing and mitigating work time inflation in task parallel programs

% - How to benchmark/modelize this (if possible)
%     - Behavior with regards to task's instructions, data used, etc
%     - Introduce the tool to "watch" specific kernels behavior, and get numbers
%     - Get traces and numbers from inside the runtime / compare
benchs:

\cite{Gajinov2014}, DaSH: A Benchmark Suite for Hybrid Dataflow and Shared Memory Programming Models: with Comparative Evaluation of Three Hybrid Dataflow Models

\cite{YarKhan2011}, QUARK Users' Guide: QUeueing And Runtime for Kernels

\cite{Duran2009}, Barcelona OpenMP Tasks Suite: A set of benchmarks targeting the exploitation of task parallelism in OpenMP

\cite{Virouleau2014}, Evaluation of OpenMP dependent tasks with the KASTORS benchmark suite

\cite{Kurzak2013}, Multithreading in the PLASMA Library

\cite{Jin2004}, Performance Characteristics of the Multi-Zone NAS Parallel Benchmarks.

\cite{Bailey1994}, The NAS Parallel Benchmarks

\cite{Muller2012}, SPEC OMP2012 -- an Application Benchmark Suite for Parallel Systems Using OpenMP


ref model:

\cite{Pan2014}, Modeling cache coherence misses on multicores

\cite{Stanisic2016}, Fast and Accurate Simulation of Multithreaded Sparse Linear Algebra Solvers

% - Get some conclusion : what matter from now on




\begin{savequote}[6cm]
<< truc
\qauthor{Test}
\end{savequote}

\chapter{Extending OpenMP}\label{chap:contrib:TODO}
\chaptertoc


%\input{tex/OpenMP on numa}
% Big section to describe how we use/extend OpenMP to exploit these architectures

% - Description of OpenMP language (tasking and such)
% - Description of OpenMP runtime

% - Motivating examples for our works using current OpenMP

% - Missing to improve things
%    - What we implemented
\cite{Virouleau2016}, Description, implementation and evaluation of an affinity clause for task directives

\cite{Virouleau2016b}, Using data dependencies to improve task-based scheduling strategies on numa architectures
%    - What remains


\section{OpenMP vs NUMA architectures}

\subsection{Current construct and clauses}
\subsection{Additional tools and techniques}
\subsection{Numbers, and why we need more}
\subsection{Conclusion: what matters?}

\section{Matching what is missing}
\subsection{Programmers needs}
\subsection{Expressing task-to-resource affinity}

\section{topo description des trucs précédents + qu'est ce qu'on peut utiliser dans le runtime}
\subsection{The programmer can give more information}
\subsection{Can the runtime exploit it?}

\section{Enhancing runtimes techniques}
\subsection{Common schedulers and their specificities}
\subsection{Data-based Heuristics}
\subsection{Concrete implementation}

\section{On top of Intel's runtime}
\subsection{TODO?}

\section{What is missing, can we do more ?}
More flexibility for initialization


\part{Perf eval}

\begin{savequote}[6cm]
<< truc
\qauthor{Test}
\end{savequote}


\chapter{Environment}\label{chap:exp:env}
\chaptertoc

\section{Compiler and runtimes}

\subsection{Gcc/GOMP}
\subsection{Clang/Intel}
\subsection{LibKOMP}
\subsection{OMPSs}
\subsection{KSTAR/StarPU?}

\section{Additional software}
\subsection{Basic benchs (mem bandwidth, epcc)}
\subsection{Various BLAS libraries}

\chapter{Experiments}\label{chap:exp:exp}
\chaptertoc


\section{Comparing machines on basic benchs}
\section{OpenMP/Runtime extensions}

\section{Conclusion}

%\input{tex/exp}
% This chapter should include:
% - Hardware description
% - Software description
%   - In-depth analysis of linar algebra kernels?
% - Experimentation results with all the above

\cite{Duran2009}, Barcelona OpenMP Tasks Suite: A set of benchmarks targeting the exploitation of task parallelism in OpenMP

\cite{Virouleau2014}, Evaluation of OpenMP dependent tasks with the KASTORS benchmark suite
% - Perf/energy

\part{Future work}

\begin{savequote}[6cm]
<< truc
\qauthor{Test}
\end{savequote}

\chapter{More OpenMP}\label{chap:contrib:TODO}
\chaptertoc

%\input{tex/future}
% This chapter should include:
% - What's left to do ?
% - Perspective

\begin{savequote}[6cm]
<< truc
\qauthor{Test}
\end{savequote}

\chapter{Conclusion}\label{chap:contrib:TODO}
\chaptertoc

%\input{tex/implem}
%\input{tex/conclusion}
